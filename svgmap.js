(function(){var a,b,c,d;b=typeof exports!="undefined"&&exports!==null?exports:this,c=(d=b.svgmap)!=null?d:b.svgmap={},a=function(){function a(a,b,c,d){var e;a==null&&(a=0),b==null&&(b=0),c==null&&(c=null),d==null&&(d=null),e=this,c===null?(e.xmin=Number.MAX_VALUE,e.xmax=Number.MAX_VALUE*-1):(e.xmin=e.left=a,e.xmax=e.right=a+c,e.width=c),d===null?(e.ymin=Number.MAX_VALUE,e.ymax=Number.MAX_VALUE*-1):(e.ymin=e.top=b,e.ymax=e.bottom=d+b,e.height=d);return}a.prototype.update=function(a,b){var c;b==null&&(b=a[1],a=a[0]),c=this,c.xmin=Math.min(c.xmin,a),c.ymin=Math.min(c.ymin,b),c.xmax=Math.max(c.xmax,a),c.ymax=Math.max(c.ymax,b),c.left=c.xmin,c.top=c.ymin,c.right=c.xmax,c.bottom=c.ymax,c.width=c.xmax-c.xmin,c.height=c.ymax-c.ymin;return this},a.prototype.intersects=function(a){return a.left<s.right&&a.right>s.left&&a.top<s.bottom&&a.bottom>s.top},a.prototype.join=function(a){s.update(a.left,a.top),s.update(a.right,a.bottom);return this};return a}(),c.BBox=a}).call(this),function(){var a,b,c,d,e,f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a};c=typeof exports!="undefined"&&exports!==null?exports:this,d=(e=c.svgmap)!=null?e:c.svgmap={},b=function(){function a(a,b){this.lon=a,this.lat=b}return a}(),a=function(){function a(b,c){a.__super__.constructor.call(this,c,b)}g(a,b);return a}(),d.LonLat=b,d.LatLon=a}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=Object.prototype.hasOwnProperty,A=function(a,b){function d(){this.constructor=a}for(var c in b)z.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a};v=typeof exports!="undefined"&&exports!==null?exports:this,w=(y=v.svgmap)!=null?y:v.svgmap={},x=w.proj={},Function.prototype.bind=function(a){var b;b=this;return function(){return b.apply(a,arguments)}},n=function(){function a(a,b){var c;this.lon0=a!=null?a:0,this.lat0=b!=null?b:0,c=this,c.PI=Math.PI,c.HALFPI=c.PI*.5,c.QUARTERPI=c.PI*.25,c.RAD=c.PI/180,c.DEG=180/c.PI,c.lam0=c.rad(this.lon0),c.phi0=c.rad(this.lat0)}a.prototype.rad=function(a){return a*this.RAD},a.prototype.deg=function(a){return a*this.DEG},a.prototype.plot=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;b==null&&(b=!0),f=[],c=!0;for(j=0,k=a.length;j<k;j++)l=a[j],e=l[0],d=l[1],g=this._visible(e,d),g&&(c=!1),m=this.project(e,d),h=m[0],i=m[1],!g&&b?f.push(this._truncate(h,i)):f.push([h,i]);return c?null:[f]};return a}(),e=function(){function a(){a.__super__.constructor.apply(this,arguments)}A(a,n),a.prototype._visible=function(a,b){return!0},a.prototype.sea=function(){var a,b,c,d,e,f;f=this,e=f.project.bind(this),d=[],a=f.lon0,f.lon0=0;for(c=-180;c<=180;c++)d.push(e(c,90));for(b=90;b>=-90;b--)d.push(e(180,b));for(c=180;c>=-180;c--)d.push(e(c,-90));for(b=-90;b<=90;b++)d.push(e(-180,b));f.lon0=a;return d},a.prototype.world_bbox=function(){var a,b,c,d,e,f;b=this.project.bind(this),d=this.sea(),a=new w.BBox;for(e=0,f=d.length;e<f;e++)c=d[e],a.update(c[0],c[1]);return a},a.prototype.clon=function(a){a-=this.lon0,a<-180?a+=360:a>180&&(a-=360);return a};return a}(),g=function(){function a(){a.__super__.constructor.apply(this,arguments)}A(a,e),a.prototype.project=function(a,b){a=this.clon(a);return[(a+180)*Math.cos(this.phi0)*2.777,(b*-1+90)*2.7777]};return a}(),x.lonlat=g,d=function(){function a(){a.__super__.constructor.apply(this,arguments)}A(a,e),a.prototype.project=function(a,b){var c,d,e,f;c=this.rad(this.clon(a)),d=this.rad(b*-1),e=c*Math.cos(this.phi0),f=Math.sin(d)/Math.cos(this.phi0);return[e*1e3,f*1e3]};return a}(),x.cea=d,h=function(){function a(b,c){a.__super__.constructor.call(this,b,45)}A(a,d);return a}(),x.gallpeters=h,i=function(){function a(b,c){a.__super__.constructor.call(this,b,37.7)}A(a,d);return a}(),x.hobodyer=i,c=function(){function a(b,c){a.__super__.constructor.call(this,b,30)}A(a,d);return a}(),x.behrmann=c,b=function(){function a(b,c){a.__super__.constructor.call(this,b,50)}A(a,d);return a}(),x.balthasart=b,o=function(){function a(){a.__super__.constructor.apply(this,arguments)}A(a,e);return a}(),l=function(){function a(b,c){var d;a.__super__.constructor.call(this,b,c),d=this,d.A0=.8707,d.A1=-0.131979,d.A2=-0.013791,d.A3=.003971,d.A4=-0.001529,d.B0=1.007226,d.B1=.015085,d.B2=-0.044475,d.B3=.028874,d.B4=-0.005916,d.C0=d.B0,d.C1=3*d.B1,d.C2=7*d.B2,d.C3=9*d.B3,d.C4=11*d.B4,d.EPS=1e-11,d.MAX_Y=.8707*.52*Math.PI;return}A(a,o),a.prototype.project=function(a,b){var c,d,e,f,g,h,i;g=this,c=g.rad(g.clon(a)),d=g.rad(b*-1),e=d*d,f=e*e,h=c*(g.A0+e*(g.A1+e*(g.A2+f*e*(g.A3+e*g.A4))))*180+500,i=d*(g.B0+e*(g.B1+f*(g.B2+g.B3*e+g.B4*f)))*180+270;return[h,i]};return a}(),x.naturalearth=l,p=function(){function a(b,c){var d;a.__super__.constructor.call(this,b,c),d=this,d.X=[1,-5.67239e-12,-0.0000715511,311028e-11,.9986,-0.000482241,-0.000024897,-0.00000133094,.9954,-0.000831031,-0.000044861,-9.86588e-7,.99,-0.00135363,-0.0000596598,367749e-11,.9822,-0.00167442,-0.0000044975,-0.00000572394,.973,-0.00214869,-0.0000903565,1.88767e-8,.96,-0.00305084,-0.0000900732,164869e-11,.9427,-0.00382792,-0.0000653428,-0.00000261493,.9216,-0.00467747,-0.000104566,48122e-10,.8962,-0.00536222,-0.0000323834,-0.00000543445,.8679,-0.00609364,-0.0001139,332521e-11,.835,-0.00698325,-0.0000640219,9.34582e-7,.7986,-0.00755337,-0.0000500038,9.35532e-7,.7597,-0.00798325,-0.0000359716,-0.00000227604,.7186,-0.00851366,-0.000070112,-0.00000863072,.6732,-0.00986209,-0.000199572,191978e-10,.6213,-0.010418,883948e-10,624031e-11,.5722,-0.00906601,181999e-9,624033e-11,.5322,0,0,0],d.Y=[0,.0124,3.72529e-10,1.15484e-9,.062,.0124001,1.76951e-8,-5.92321e-9,.124,.0123998,-7.09668e-8,2.25753e-8,.186,.0124008,2.66917e-7,-8.44523e-8,.248,.0123971,-9.99682e-7,3.15569e-7,.31,.0124108,373349e-11,-0.0000011779,.372,.0123598,-0.000013935,439588e-11,.434,.0125501,520034e-10,-0.0000100051,.4968,.0123198,-0.0000980735,922397e-11,.5571,.0120308,402857e-10,-0.0000052901,.6176,.0120369,-0.0000390662,7.36117e-7,.6769,.0117015,-0.0000280246,-8.54283e-7,.7346,.0113572,-0.0000408389,-5.18524e-7,.7903,.0109099,-0.0000486169,-0.0000010718,.8435,.0103433,-0.0000646934,5.36384e-9,.8936,.00969679,-0.0000646129,-0.00000854894,.9394,.00840949,-0.000192847,-0.00000421023,.9761,.00616525,-0.000256001,-0.00000421021,1,0,0,0],d.NODES=18,d.FXC=.8487,d.FYC=1.3523,d.C1=11.459155902616464,d.RC1=.08726646259971647,d.ONEEPS=1.000001,d.EPS=1e-8;return}A(a,o),a.prototype._poly=function(a,b,c){return a[b]+c*(a[b+1]+c*(a[b+2]+c*a[b+3]))},a.prototype.project=function(a,b){var c,d,e,f,g,h,i;g=this,a=g.clon(a),d=g.rad(a),e=g.rad(b*-1),f=Math.abs(e),c=Math.floor(f*g.C1),c>=g.NODES&&(c=g.NODES-1),f=g.deg(f-g.RC1*c),c*=4,h=g._poly(g.X,c,f)*g.FXC*d,i=g._poly(g.Y,c,f)*g.FYC,e<0&&(i=-i);return[h,i]};return a}(),x.robinson=p,f=function(){function a(b,c){var d;b==null&&(b=0),c==null&&(c=0),a.__super__.constructor.call(this,b,c),d=this,d.C_x=.4222382003157712,d.C_y=1.3265004281770023,d.RC_y=.7538633073600218,d.C_p=3.5707963267948966,d.RC_p=.2800495767557787,d.EPS=1e-7,d.NITER=6}A(a,o),a.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l;h=this,f=h.rad(h.clon(a)),g=h.rad(b*-1),i=h.C_p*Math.sin(g),c=g*g,g*=.895168+c*(.0218849+c*.00826809),e=h.NITER;while(e>0){d=Math.cos(g),j=Math.sin(g),c=(g+j*(d+2)-i)/(1+d*(d+2)-j*j),g-=c;if(Math.abs(c)<h.EPS)break;e-=1}e===0?(k=h.C_x*f,l=g<0?-h.C_y:h.C_y):(k=h.C_x*f*(1+Math.cos(g)),l=h.C_y*Math.sin(g));return[k,l]};return a}(),x.eckert4=f,r=function(){function a(){a.__super__.constructor.apply(this,arguments)}A(a,o),a.prototype.project=function(a,b){var c,d,e,f,g;d=this,c=d.rad(d.clon(a)),e=d.rad(b*-1),f=c*Math.cos(e),g=e;return[f,g]};return a}(),x.sinusoidal=r,k=function(){function a(b,c,d,e,f,g){var h,i,j,k;b==null&&(b=0),c==null&&(c=0),d==null&&(d=1.5707963267948966),e==null&&(e=null),f==null&&(f=null),g==null&&(g=null),a.__super__.constructor.call(this,b,c),h=this,h.MAX_ITER=10,h.TOLERANCE=1e-7,d!=null?(i=d+d,k=Math.sin(d),j=Math.sqrt(Math.PI*2*k/(i+Math.sin(i))),h.cx=2*j/Math.PI,h.cy=j/k,h.cp=i+Math.sin(i)):e!=null&&f!=null&&typeof cz!="undefined"&&cz!==null?(h.cx=e,h.cy=f,h.cp=g):console.error("svgmap.proj.Mollweide: either p or cx,cy,cp must be defined")}A(a,o),a.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l;h=this,g=Math,c=g.abs,f=h.rad(h.clon(a)),i=h.rad(b),e=h.cp*g.sin(i),d=h.MAX_ITER;while(d!==0){j=(i+g.sin(i)-e)/(1+g.cos(i)),i-=j;if(c(j)<h.TOLERANCE)break;d-=1}d===0?i=i>=0?h.HALFPI:-h.HALFPI:i*=.5,k=h.cx*f*g.cos(i),l=h.cy*g.sin(i);return[k,l*-1]};return a}(),x.mollweide=k,t=function(){function a(b,c){b==null&&(b=0),c==null&&(c=0),a.__super__.constructor.call(this,b,c,1.0471975511965976)}A(a,k);return a}(),x.wagner4=t,u=function(){function a(b,c){b==null&&(b=0),c==null&&(c=0),a.__super__.constructor.call(this,b,c,null,.90977,1.65014,3.00896)}A(a,k);return a}(),x.wagner5=u,a=function(){function a(b,c,d){var e;b==null&&(b=0),c==null&&(c=0),d==null&&(d=1e3),a.__super__.constructor.call(this,b,c),e=this,e.r=d,e.elevation0=e.to_elevation(c),e.azimuth0=e.to_azimuth(b)}A(a,n),a.prototype.to_elevation=function(a){var b;b=this;return(a+90)/180*b.PI-b.HALFPI},a.prototype.to_azimuth=function(a){var b;b=this;return(a+180)/360*b.PI*2-b.PI},a.prototype._visible=function(a,b){var c,d,e,f,g;g=this,f=Math,e=g.to_elevation(b),c=g.to_azimuth(a),d=f.sin(e)*f.sin(g.elevation0)+f.cos(g.elevation0)*f.cos(e)*f.cos(c-g.azimuth0);return d>=0},a.prototype._truncate=function(a,b){var c,d,e,f,g;c=Math,d=this.r,e=c.atan2(b-d,a-d),f=d+d*c.cos(e),g=d+d*c.sin(e);return[f,g]},a.prototype.sea=function(){var a,b,c,d;b=[],d=this.r,a=Math;for(c=0;c<=360;c++)b.push([d+a.cos(this.rad(c))*d,d+a.sin(this.rad(c))*d]);return b},a.prototype.world_bbox=function(){var a;a=this.r;return new w.BBox(0,0,a*2,a*2)};return a}(),m=function(){function b(){b.__super__.constructor.apply(this,arguments)}A(b,a),b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j;f=this,e=Math,d=f.to_elevation(b),c=f.to_azimuth(a),h=f.r*e.cos(d)*e.sin(c-f.azimuth0),j=-f.r*(e.cos(f.elevation0)*e.sin(d)-e.sin(f.elevation0)*e.cos(d)*e.cos(c-f.azimuth0)),g=f.r+h,i=f.r+j;return[g,i]};return b}(),x.ortho=m,j=function(){function b(a,c){a==null&&(a=0),c==null&&(c=0),b.__super__.constructor.call(this,a,c),this.scale=Math.sqrt(2)*.5}A(b,a),b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l;g=this.rad(b),e=this.rad(a),f=Math,h=f.sin,c=f.cos,d=f.pow(2/(1+h(this.phi0)*h(g)+c(this.phi0)*c(g)*c(e-this.lam0)),.5),d*=this.scale,j=this.r*d*c(g)*h(e-this.lam0),l=-this.r*d*(c(this.phi0)*h(g)-h(this.phi0)*c(g)*c(e-this.lam0)),i=this.r+j,k=this.r+l;return[i,k]};return b}(),x.laea=j,s=function(){function b(){b.__super__.constructor.apply(this,arguments)}A(b,a),b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;h=this.rad(b),f=this.rad(a),g=Math,i=g.sin,c=g.cos,e=.5,d=2*e/(1+i(this.phi0)*i(h)+c(this.phi0)*c(h)*c(f-this.lam0)),k=this.r*d*c(h)*i(f-this.lam0),m=-this.r*d*(c(this.phi0)*i(h)-i(this.phi0)*c(h)*c(f-this.lam0)),j=this.r+k,l=this.r+m;return[j,l]};return b}(),x.stereo=s,q=function(){function b(a,c,d,e,f){var g,h,i,j,k;a==null&&(a=0),c==null&&(c=0),d==null&&(d=3.45),e==null&&(e=35),f==null&&(f=0),b.__super__.constructor.call(this,0,0),this.dist=d,this.up=this.rad(e),this.tilt=this.rad(f),this.scale=1,j=Number.MAX_VALUE,i=Number.MAX_VALUE*-1;for(g=0;g<=179;g++)for(h=0;h<=360;h++)k=this.project(h-180,g-90),j=Math.min(k[0],j),i=Math.max(k[0],i);this.scale=this.r*2/(i-j),b.__super__.constructor.call(this,a,c);return}A(b,a),b.prototype.project=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;l=this.rad(b),j=this.rad(a),k=Math,m=k.sin,e=k.cos,f=m(this.phi0)*m(l)+e(this.phi0)*e(l)*e(j-this.lam0),i=(this.dist-1)/(this.dist-f),i=(this.dist-1)/(this.dist-f),i*=this.scale,q=this.r*i*e(l)*m(j-this.lam0),t=-this.r*i*(e(this.phi0)*m(l)-m(this.phi0)*e(l)*e(j-this.lam0)),h=e(this.up),o=m(this.up),g=e(this.tilt),n=m(this.tilt),d=this.r*(this.dist-1),c=(t*h+q*o)*m(this.tilt/d)+g,r=(q*h-t*o)*e(this.tilt/c),u=(t*h+q*o)/c,p=this.r+r,s=this.r+u;return[p,s]},b.prototype._visible=function(a,b){var c,d,e,f;e=this.to_elevation(b),c=this.to_azimuth(a),f=Math,d=f.sin(e)*f.sin(this.elevation0)+f.cos(this.elevation0)*f.cos(e)*f.cos(c-this.azimuth0);return d>=1/this.dist};return b}(),x.satellite=q}.call(this),function(){var a,b,c,d,e,f,g,h,i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a};f=typeof exports!="undefined"&&exports!==null?exports:this,g=(h=f.svgmap)!=null?h:f.svgmap={},g.version="0.1.0",e=function(){function a(a){var b;b=this,b.container=$(a),b.layers=[]}a.prototype.loadMap=function(a,b){var c;c=this,c.mapLoadCallback=b;return $.ajax({src:a,onSuccess:c.mapLoaded})},a.prototype.addLayer=function(a,b){var c;b==null&&(b=a),c={id:b,src:a,paths:p};return this.layers.push(c)},a.prototype.addMarker=function(a){},a.prototype.display=function(){},a.prototype.mapLoaded=function(a){},a.prototype.render=function(){},a.prototype.project=function(a,b){};return a}(),d=function(){function a(a,b,c){c==null&&(c=[0,0])}return a}(),c=function(){function a(a,b){}j(a,d);return a}(),b=function(){function a(a,b){}j(a,d);return a}(),a=function(){function a(){}return a}()}.call(this),function(){var a,b,c;a=function(){function a(a,b,c,d){var e;d==null&&(d=0),e=this,e.bbox=a,e.width=b,e.padding=d,e.height=c,e.scale=Math.min((b-d*2)/a.width,(c-d*2)/a.height)}a.prototype.project=function(a,b){var c,d,e,f,g;b==null&&(b=a[1],a=a[0]),e=this,f=e.scale,c=e.bbox,d=e.height,g=e.width,a=(a-c.left)*f+(g-c.width*f)*.5,b=(b-c.top)*f+(d-c.height*f)*.5;return[a,b]};return a}(),b=typeof exports!="undefined"&&exports!==null?exports:this,(c=b.svgmap)==null&&(b.svgmap={}),b.svgmap.View=a}.call(this)